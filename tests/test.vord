<?xml version="1.0" encoding="utf-8"?>
<!-- A resource descriptor for various unit tests -->

<ResourceDescriptor srcdir="data">
	<meta name="test.inRd">from Rd</meta>
	<schema>test</schema>

	<Data id="metatest">
		<NullGrammar/>
		<Semantics>
			<Record table="noname">
				<Field dest="1" source="alpha" 
					dbtype="double precision" optional="false"/>
				<meta name="test.inRec">from Rec</meta>
			</Record>
		</Semantics>
	</Data>

	<Data id="adqltest">
		<NullGrammar/>
		<Semantics>
			<Record table="adqltable">
				<adql>True</adql>
				<Field dest="foo" source="alpha" 
					dbtype="double precision" optional="false"/>
			</Record>
		</Semantics>
	</Data>

	<Data id="privtest" virtual="True">
		<NullGrammar/>
		<Semantics>
			<Table table="privtable">
				<readRoles>defaults,privtestuser</readRoles>
				<allRoles>testadmin</allRoles>
				<Field dest="foo" source="alpha"/>
			</Table>
		</Semantics>
	</Data>

	<Data id="valuestest">
		<NullGrammar/>
		<Semantics>
			<Record table="valspec">
				<Field dest="numeric" optional="False">
					<Values min="10" max="15"/>
				</Field>
				<Field dest="enum" dbtype="text">
					<Values>
						<option>abysimal</option>
						<option>horrific</option>
						<option>gruesome</option>
						<option>bad</option>
						<option>acceptable</option>
					</Values>
				</Field>
			</Record>
		</Semantics>
		<Field dest="docLowBound">
			<Values min="-10"/>
		</Field>
		<Field dest="docHiBound">
			<Values max="-10"/>
		</Field>
		<Field dest="docReq" optional="False" dbtype="text"/>
	</Data>

	<Data id="processortest">
		<RowsetGrammar>
			<Field dest="constant" source="constant"/>
			<Field dest="foo" source="foo" dbtype="text"/>
			<RowProcessor name="expandComma">
				<arg name="srcField" value="foo"/>
				<arg name="targetField" value="indiv"/>
			</RowProcessor>
		</RowsetGrammar>
		<Semantics>
			<Record table="proctest">
				<Field dest="tf" source="indiv" dbtype="text"/>
				<Field dest="c" source="constant"/>
			</Record>
		</Semantics>
	</Data>

	<Data id="tableMaker" virtual="True" encoding="iso8859-1">
		<Semantics>
			<Record table="typestable" id="typestabledef">
				<Field dest="anint" source="anint" tablehead="An Integer" dbtype="int"/>
				<Field dest="afloat" source="afloat" tablehead="Some Real"/>
				<Field dest="adouble" source="adouble" tablehead="And a Double"
					dbtype="double precision"/>
				<Field dest="atext" source="atext" dbtype="text"
					tablehead="A string must be in here as well"/>
				<Field dest="adate" source="adate" tablehead="When" dbtype="date"/>
			</Record>
		</Semantics>
		<RowsetGrammar fieldsFrom="typestabledef"/>
	</Data>

	<Data id="boxTest" virtual="True">
		<DictlistGrammar/>
		<Semantics>
			<Table table="misctypes">
				<Field dest="box" source="box" dbtype="box"/>
			</Table>
		</Semantics>
	</Data>

	<Data id="twtsetdata" virtual="True">
		<DictlistGrammar/>
		<Semantics>
			<Table table="twtest">
				<!-- filled in by unit test -->
			</Table>
		</Semantics>
	</Data>

	<Data id="siaptest" virtual="True">
		<DictlistGrammar/>
		<Semantics>
			<Table table="siaptable">
				<implements name="bboxSiap"/>
			</Table>
		</Semantics>
	</Data>

	<Data id="viziertest" virtual="True">
		<DictlistGrammar/>
		<Semantics>
			<Table table="vizierstrings">
				<Field dest="s" source="s" dbtype="text"/>
			</Table>
		</Semantics>
	</Data>

	<Data id="ADQLTest">
		<Semantics>
			<Record table="adql" id="adqlcols">
				<Field dest="alpha" unit="deg" ucd="pos.eq.ra;meta.main"
					description="A sample RA" source="alpha" tablehead="Raw RA"/>
				<Field dest="delta" unit="deg" ucd="pos.eq.dec;meta.main"
					description="A sample Dec" source="delta"/>
				<Field dest="mag" unit="mag" ucd="phot.mag"
					description="A sample magnitude" source="mag"/>
				<Field dest="rv" unit="km/s" ucd="phys.veloc;pos.heliocentric"
					description="A sample radial velocity" source="rv"/>
			</Record>
		</Semantics>
		<RowsetGrammar fieldsFrom="adqlcols"/>
	</Data>

	<Data id="productimport" sourcePat="*.imp">
		<!-- Sources are in tests/data, so you need to fix inputsDir to
		./tests to import this -->
		<KeyValueGrammar>
       <Macro name="setProdtblValues">
          <arg name="prodtblKey" value="@inputRelativePath"/>
          <arg name="prodtblOwner" value="test"/>
          <arg name="prodtblEmbargo" source="embargo"/>
          <arg name="prodtblPath" value="@inputRelativePath"/>
          <arg name="prodtblFsize" value="@inputSize"/>
        </Macro>
				<Macro name="handleEquatorialPosition">
					<arg name="alpha" source="alpha"/>
					<arg name="delta" source="delta"/>
				</Macro>
		</KeyValueGrammar>
		<Semantics>
			<Table table="prodtest">
				<Field dest="object" source="object" dbtype="text"/>
				<Field dest="alpha" source="alphaFloat" dbtype="real" ucd="pos.eq.ra"/>
				<Field dest="alpha" source="alphaFloat" dbtype="real" ucd="pos.eq.dec"/>
				<implements name="products"/>
			</Table>
		</Semantics>
	</Data>
</ResourceDescriptor>

